<!DOCTYPE html ><html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta http-equiv="Content-Style-Type" content="text/css"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>NVIDIA Tegra Linux Driver Package Development Guide</title><link rel="Prev" href="l4t_getting_started.html" title="Previous"><link rel="Next" href="l4t_lauterbach_scripts.html" title="Next"><link rel="StyleSheet" href="css/l4t_uboot_guide.css" type="text/css" media="all"><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all"><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all"><!--[if IE 7]><link rel="StyleSheet" href="css/l4t_uboot_guide_IE7.css" type="text/css" media="all"><![endif]--><link rel="StyleSheet" href="css/print.css" type="text/css" media="print"><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script></head><body id="pmYteolPSpEDDRd0CN7kwuA" class="ww_skin_page_body" style="background-position: center center; margin-left: 0pt; margin-right: 10pt" onload="Page.OnLoad('../index.html#page/Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html');"><header><div><table width="100%" align="center" summary=""><tr><td class="Header_Left"><img alt="NVIDIA Tegra" src="images/NVLogo_2D_H.jpg" width="204" height="44" border="0"></td><td class="Header_Right">
           Tegra Linux Driver Package<br>
           Development Guide <br><font size="-1">21.4 Release | July 10, 2015</font></td></tr></table></div><!--     <br clear="all">
 --><hr color="#DEE4F0"><div class="ww_skin_page_toolbar"><!-- Twitter --><!--         --><!-- FaceBook Like --><!--               --><!-- LinkedIn Share --><!--                --><!-- Google +1 --><!--           --><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="wwpID0E0DS0HA" class="Heading_1">U-Boot Guide</div><div id="wwpID0E0CS0HA" class="Body_Text">U-Boot is the default boot loader for NVIDIA<span style="vertical-align: super">®</span>&nbsp;Tegra<span style="vertical-align: super">®</span>&nbsp;Linux Driver Package (L4T). It replaced Fastboot as of the R21.1 release. If you used an earlier release of L4T, check that your environment is fully updated for the new boot loader before compiling and flashing the boot loader and the kernel.</div><div id="wwpID0E0BS0HA" class="Heading_2">Requirements</div><div id="wwpID0E0AS0HA" class="Body_Text">The software requirements and prerequisites required for Tegra&nbsp;Linux Driver Package (L4T) include:</div><div id="wwpID0E06R0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Linux-based Host System</div><div id="wwpID0E05R0HA" class="List_Continue">Functionality of the U-Boot build and flashing utilities was validated using an Ubuntu 12.04 host system. Later versions of Ubuntu or alternative Linux distributions may work with host-specific modifications.</div><div id="wwpID0E04R0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Tegra&nbsp;Linux Driver Package (L4T)</div><div id="wwpID0E03R0HA" class="List_Continue">Download the latest L4T package from the Tegra Developer Zone and follow the installation instructions in the user documentation. You can find L4T on the Tegra Developer Zone:</div><div id="wwpID0E02R0HA" class="Code"><span class="Weblink"><a href="http://developer.nvidia.com/linux-tegra" target="external_window">http://developer.nvidia.com/linux-tegra</a></span><span class="Weblink"> </span></div><div id="wwpID0E01R0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Flex and Bison</div><div id="wwpID0E0ZR0HA" class="Number_Continue">To parse various configuration files, the U‑Boot makefiles require Fast Lexical Analyzer (Flex) and Bison, a GNU general purpose parser generator. If Flex and Bison are not already installed on your host system, you must install them. On Ubuntu, use the following command:</div><div id="wwpID0E0YR0HA" class="Code">$ sudo apt-get install flex bison</div><div id="wwpID0E0XR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Device Tree Compiler (DTC)</div><div id="wwpID0E0WR0HA" class="List_Continue">The U-Boot make system must have the full path to the DTC binary. Pass the path as a variable or include the dtc directory in the local command path of the host machine. Most of the DTC packages available from standard Linux distribution package management systems (like apt) are not yet updated with a version of DTC supporting the features required by the U‑Boot makefile. Therefore, an example of building DTC from source is included in this chapter. For the procedure, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0XF0HA" title="U-Boot Guide">Building Device Tree Compiler</a></span>.</div><div id="wwpID0E0VR0HA" class="List_Continue">A pre-built DTC compiler is also included in the kernel directory of the release. This DTC compiler is built from the kernel sources in this release. The sources are located in the <span class="Code_Char">scripts/dtc</span> directory. You build the DTC compiler by building the kernel <span class="Code_Char">dtbs</span> target.</div><div id="wwpID0E0UR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>ARM tool chain for cross compilation.</div><div id="wwpID0E0TR0HA" class="List_Continue">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_toolchain.html#" title="Building Crosstool-ng Toolchain and glibc">Building Crosstool-ng Toolchain and glibc</a></span> in this guide.</div><div id="wwpID0E0SR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>U‑Boot source.</div><div id="wwpID0E0RR0HA" class="List_Continue">For more information, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0KR0HA" title="U-Boot Guide">Downloading and Building U-Boot</a></span> in this chapter.</div><div id="wwpID0E0QR0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Kernel source.</div><div id="wwpID0E0PR0HA" class="List_Continue">For information, see the following sections in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> chapter:</div><div id="wwpID0E0OR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Setting up the Root File System</a></span></div><div id="wwpID0E0NR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E05C0HA" title="Getting Started">Synchronizing the Kernel Sources</a></span></div><div id="wwpID0E0MR0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E0LC0HA" title="Getting Started">Building the NVIDIA Kernel</a></span></div><div id="wwpID0E0LR0HA" class="List_Continue">Also, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0FQ0HA" title="U-Boot Guide">Adding a Compiled Kernel to the Root File System</a></span> in this chapter.</div><div id="wwpID0E0KR0HA" class="Heading_2">Downloading and Building U-Boot</div><div id="wwpID0E0JR0HA" class="Body_Text">Before flashing U-Boot to your reference platform, you must first download and build it on your Linux host system. NVIDIA offers a Git repository containing the source code for a U‑Boot build suitable for L4T.</div><div id="wwpID0E0IR0HA" class="Heading_5">Prerequisite</div><div id="wwpID0E0HR0HA" class="Body_Text">Before copying U-Boot, back up the original <span class="Code_Char">u‑boot.bin</span> file in:</div><div id="wwpID0E0GR0HA" class="Code">&lt;top&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/u-boot.bin</div><div id="wwpID0E0FR0HA" class="Body_Text">Where <span class="Code_Char">&lt;platform&gt;</span> is the Tegra hardware platform, such as <span class="Code_Char">ardbeg</span>.</div><div id="wwpID0E0ER0HA" class="Heading_5">To download and build U-Boot</div><div id="wwpID0E0DR0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Download the L4T U-Boot source code by executing the following commands:</div><div id="wwpID0E0CR0HA" class="Code">$ mkdir -p &lt;uboot_src_dir&gt;</div><div id="wwpID0E0BR0HA" class="Code">$ cd &lt;uboot_src_dir&gt;</div><div id="wwpID0E0AR0HA" class="Code">$ git clone -n git://nv-tegra.nvidia.com/3rdparty/u-boot.git</div><div id="wwpID0E06Q0HA" class="List_Continue">Alternatively, you can use the <span class="Code_Char">source_sync.sh</span> script in the L4T release. </div><div id="wwpID0E05Q0HA" class="List_Continue">When running <span class="Code_Char">source_sync.sh -u</span>, if you provide no parameters, the script prompts for the <span class="Code_Char">&lt;TAG_NAME&gt;</span>, which is provided in the release notes. </div><div id="wwpID0E04Q0HA" class="List_Continue">The "-k" option to <span class="Code_Char">source_sync</span> will sync only the kernel sources. A space between the <span class="Code_Char">-u</span> and <span class="Code_Char">-k</span> options is allowed. By default if no option is provided, the script will sync both kernel and u-boot sources</div><div id="wwpID0E03Q0HA" class="List_Continue">Also, you can run the script by passing the <span class="Code_Char">&lt;TAG_NAME&gt;</span> in as follows:</div><div id="wwpID0E02Q0HA" class="Code">$ cd &lt;your_L4T_root&gt;/Linux_for_Tegra</div><div id="wwpID0E01Q0HA" class="Code">$ ./source_sync.sh –u &lt;TAG_NAME&gt;</div><div id="wwpID0E0ZQ0HA" class="List_Continue">This syncs the source to:</div><div id="wwpID0E0YQ0HA" class="Code">&lt;source_sync.sh_location&gt;/sources/u-boot_source. </div><div id="wwpID0E0XQ0HA" class="List_Continue">The <span class="Code_Char">&lt;uboot_src_dir&gt;</span> directory becomes:</div><div id="wwpID0E0WQ0HA" class="Code"> &lt;your_L4T_root&gt;/Linux_for_Tegra/sources/u-boot_source. </div><div id="wwpID0E0VQ0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Check out the Git tag name:</div><div id="wwpID0E0UQ0HA" class="Code">$ cd u-boot</div><div id="wwpID0E0TQ0HA" class="Code">$ git checkout –b &lt;branch_name&gt; &lt;tag_name&gt;</div><div id="wwpID0E0SQ0HA" class="List_Continue">Where:</div><div id="wwpID0E0RQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;branch_name&gt;</span> is the name of your local branch.</div><div id="wwpID0E0QQ0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;tag_name&gt;</span> is the release tag name provided in the <span class="Emphasis">Release Notes</span>.</div><div id="wwpID0E0PQ0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Set the build environment:</div><div id="wwpID0E0OQ0HA" class="Code">$ export ARCH=arm</div><div id="wwpID0E0NQ0HA" class="Code">$ export CROSS_COMPILE=&lt;your_toolchain_location&gt;</div><div id="wwpID0E0MQ0HA" class="Code">$ export DTC=&lt;dtc_binary_location&gt;</div><div id="wwpID0E0LQ0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Build U-Boot by executing:</div><div id="wwpID0E0KQ0HA" class="Code">$ cd &lt;uboot_src_dir&gt;/u-boot</div><div id="wwpID0E0JQ0HA" class="Code">$ make distclean</div><div id="wwpID0E0IQ0HA" class="Code">$ make &lt;target_board&gt;_defconfig</div><div id="wwpID0E0HQ0HA" class="Code">$ make</div><div id="wwpID0E0GQ0HA" class="List_Continue">Where <span class="Code_Char">&lt;target_board&gt;</span> is the device, such as code-name <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0FQ0HA" class="Heading_2">Flashing U-Boot</div><div id="wwpID0E0EQ0HA" class="Body_Text">You must flash U-Boot to internal eMMC only. During flashing, U-Boot fetches the boot script and kernel and mounts the rootfs, which may reside on one of the following storage devices:</div><div id="wwpID0E0DQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Internal eMMC</div><div id="wwpID0E0CQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>An SD card</div><div id="wwpID0E0BQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>An USB storage device</div><div id="wwpID0E0AQ0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>An IP network</div><div id="wwpID0E06P0HA" class="Body_Text">When executing the script that flashes U-Boot, you must specify a command-line option appropriate to the storage device containing the boot script, kernel, and rootfs. The following sections describe the script command for each configuration.</div><div id="wwpID0E05P0HA" class="Heading_5">Support for BOARDID</div><div id="wwpID0E04P0HA" class="Body_Text">NVIDIA uses the Board ID scheme to identify each board and the boot process will check for its ID to proceed. However, for some of the partners designing their own board, Board ID is not used and, thus, setting it should be skipped so the boot code knows not to check its ID and refuse booting if the check fails.</div><div id="wwpID0E03P0HA" class="Body_Text">However, executing <span class="Code_Char">BOARDID</span> should be uncommented in the <span class="Code_Char">jetson-tk1.conf</span> file before executing <span class="Code_Char">flash.sh</span> when you don’t have an EEPROM with a correctly flashed Board ID and you want to pass a custom, or known, Board ID while flashing. Doing so will override the EEPROM value if present. For example: </div><div id="wwpID0E02P0HA" class="Code">BOARDID="0x177 0x00 0x03"; </div><div id="wwpID0E01P0HA" class="List_Continue"><span class="Strong">Note:</span> When booting from external media, you must run the <span class="Code_Char">flash.sh</span> script as the last step when deploying/configuring the target. This is because the <span class="Code_Char">flash.sh</span> script copies the appropriate <span class="Code_Char">extlinux.conf</span> file and the only way to know that it is the proper file is when we know which device is being flashed during <span class="Code_Char">flash.sh</span>.</div><div id="wwpID0E0ZP0HA" class="Heading_5">To flash U‑Boot and mount the rootfs from internal eMMC</div><div id="wwpID0E0YP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to fetch the boot script and kernel and mounts rootfs from internal eMMC:</div><div id="wwpID0E0XP0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; mmcblk0p1</div><div id="wwpID0E0WP0HA" class="List_Continue">Where <span class="Code_Char">&lt;target_board&gt;</span> is <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0VP0HA" class="List_Continue"><span class="Strong">Note:</span> Check that your environment is fully updated for this change in boot loader before compiling and flashing the boot loader and the kernel.</div><div id="wwpID0E0UP0HA" class="Heading_5">To flash U-Boot and mount the rootfs from an SD card</div><div id="wwpID0E0TP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to fetch the boot script and kernel and mounts rootfs from an SD card:</div><div id="wwpID0E0SP0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; mmcblk1p1</div><div id="wwpID0E0RP0HA" class="List_Continue">Where <span class="Code_Char">&lt;target_board&gt;</span> is <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0QP0HA" class="Heading_5">To flash U-Boot and mount the rootfs from a USB storage device</div><div id="wwpID0E0PP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use the following command to fetch the boot script and kernel and to mount the rootfs from a USB storage device, such as a Pen Drive.</div><div id="wwpID0E0OP0HA" class="Code">$ sudo ./flash.sh &lt;target_board&gt; sda1</div><div id="wwpID0E0NP0HA" class="List_Continue">Where <span class="Code_Char">&lt;target_board&gt;</span> is <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0MP0HA" class="List_Continue"><span class="Strong">Note:</span> The U-Boot boot loader only detects USB external storage. The kernel detects both USB external storage and external SCSI_SATA storage.</div><div id="wwpID0E0LP0HA" class="List_Continue">Use only 1 external USB storage device at a time. If using more than 1 external device, a random device may be chosen as root device.</div><div id="wwpID0E0KP0HA" class="Heading_5">To flash U‑Boot and mount the rootfs from an IP network</div><div id="wwpID0E0JP0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Use  the following command to fetch the boot script and kernel and mount the rootfs from an IP network:</div><div id="wwpID0E0IP0HA" class="Code">$ sudo ./flash.sh –N &lt;IPA&gt;:/&lt;<span class="Code_Char">nfs directory</span>&gt; [-n &lt;target IPA&gt;:&lt;host IPA&gt;:&lt;gateway IPA&gt;:&lt;netmask&gt;] &lt;<span class="Code_Char">target_board</span>&gt; &lt;interface name&gt;</div><div id="wwpID0E0HP0HA" class="List_Continue">Where: </div><div id="wwpID0E0GP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;target_board&gt;</span> is <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0FP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;interface name&gt;</span> is eth0 for RJ45 connector and eth1 for USB Ethernet dongle.</div><div id="wwpID0E0EP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;IPA&gt;</span> is the NFS server hosting the rootfs.</div><div id="wwpID0E0DP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;nfs_directory&gt;</span> is the full path name of exported rootfs.</div><div id="wwpID0E0CP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;target IPA&gt;</span> is the static IP address for the target device.</div><div id="wwpID0E0BP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;host IPA&gt;</span> is the static IP address for the NFS server.</div><div id="wwpID0E0AP0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;gateway IPA&gt;</span> is the static IP address for the gateway.</div><div id="wwpID0E06O0HA" class="List_Bullet_2"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;netmask&gt;</span> is the static netmask for the local network.</div><div id="wwpID0E05O0HA" class="List_Continue"><span class="Strong">Note:</span> The <span class="Code_Char">-n</span> option is only recommended on point-to-point network connections where no DHCP server is configured. </div><div id="wwpID0E04O0HA" class="Heading_2">Flashing Just U-Boot</div><div id="wwpID0E03O0HA" class="Body_Text">You can find instructions for flashing the full L4T image to the reference platform in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_uboot_guide.html#wwpID0E0FQ0HA" title="U-Boot Guide">Flashing U-Boot</a></span> in this chapter. If, however, you wish to flash just U‑Boot, proceed as follows.</div><div id="wwpID0E02O0HA" class="Heading_5">To copy U-Boot for flashing to the reference platform</div><div id="wwpID0E01O0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following on your Linux host system:</div><div id="wwpID0E0ZO0HA" class="Code">$ cp &lt;uboot_src_dir&gt;/u-boot/u-boot-dtb-tegra.bin &lt;your_L4T_root&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/u-boot.bin</div><div id="wwpID0E0YO0HA" class="Heading_5">To flash just new U-Boot</div><div id="wwpID0E0XO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following:</div><div id="wwpID0E0WO0HA" class="Code">$ sudo ./flash.sh –k EBT &lt;target_board&gt; mmcblk0p1</div><div id="wwpID0E0VO0HA" class="List_Continue">Where <span class="Code_Char">&lt;target_board&gt;</span> is <span class="Code_Char">jetson-tk1</span> for Jetson TK1.</div><div id="wwpID0E0UO0HA" class="Heading_2">Changing the eMMC Partition Layout</div><div id="wwpID0E0TO0HA" class="Body_Text">The following information is based on eMMC hardware and software layout information in the following files:</div><div id="wwpID0E0SO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;target_board&gt;.conf</span> </div><div id="wwpID0E0RO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">&lt;top&gt;/Linux_for_Tegra/bootloader/&lt;platform&gt;/cfg/gnu_linux_fastboot_emmc_full.cfg</span></div><div id="wwpID0E0QO0HA" class="List_Continue">Where <span class="Code_Char">&lt;top&gt;</span> is the L4T root, where <span class="Code_Char">flash.sh</span> generates the internal eMMC partition layout. When you use the NvFlash utility and the <span class="Code_Char">fastboot.bin</span> flash application, L4T U-Boot does not use the kernel partition. </div><div id="wwpID0E0PO0HA" class="List_Continue"><span class="Strong">Applies to:</span> <span class="Strong">R21.2 and earlier releases:</span> Aside from this difference with respect to the kernel partition, U-Boot has the same internal eMMC partition layout as that used by Fastboot.</div><div id="wwpID0E0OO0HA" class="Heading_5">eMMC IC Parameter</div><div id="wwpID0E0NO0HA" class="Body_Text">The eMMC IC parameter is defined by 2 variables in the <span class="Code_Char">&lt;target_board&gt;.conf</span> file. They limit the size of the total usable data area and determine the location of GPT partitions.</div><div id="wwpID0E0MO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The BOOTPARTSIZE parameter specifies the eMMC boot partition size (boot0 partition size + boot1 partition size)</div><div id="wwpID0E0LO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>The EMMCSIZE parameter specifies the eMMC usable data size (BOOTPARTSIZE + user partition size)</div><div id="wwpID0E0KO0HA" class="List_Continue"><span class="Strong">Note:</span> boot0, boot1, and user partition size can be obtained from the eMMC device data sheet.</div><div id="wwpID0E0JO0HA" class="Heading_5">RootFS Size</div><div id="wwpID0E0IO0HA" class="Body_Text">The rootfs partition is the largest of the partitions, and its size is one of the key factors in partition layout determination. By default, <span class="Code_Char">flash.sh</span> sets the rootfs size at 14 GB. You can change this by modifying the value of the <span class="Code_Char">ROOTFSSIZE</span> variable in the <span class="Code_Char">&lt;target_board&gt;.conf</span> file.</div><div id="wwpID0E0HO0HA" class="Body_Text"><span class="Strong">Note:</span> The total space used by all partitions cannot exceed <span class="Code_Char">EMMCSIZE</span>.</div><div id="wwpID0E0GO0HA" class="Heading_5">GPT Partitions</div><div id="wwpID0E0FO0HA" class="Body_Text">The <span class="Code_Char">flash.sh</span> script creates the primary and secondary GPT partitions automatically, based on the internal eMMC partition layout. The Protective MBR contains device information to prevent traditional boot loaders from performing destructive actions. The primary GPT partition contains the GUID Partition Table. The secondary GPT partition contains the same information as the primary GPT and serves as the backup. The Protective MBR is located at LBA 0, the primary GPT is located at LBA 1, and the secondary GPT is located at the last LBA of the boot device. The last Logical Block Address (LBA) varies from device to device. Both U-Boot and the kernel are able to obtain the last LBA.</div><div id="wwpID0E0EO0HA" class="Heading_5">LNX Partition</div><div id="wwpID0E0DO0HA" class="Body_Text">Normally, the LNX partition is not used by U-Boot; however, for compatibility, an empty LNX partition is allocated.</div><div id="wwpID0E0CO0HA" class="Heading_5">APP Partition</div><div id="wwpID0E0BO0HA" class="Body_Text">If rootfs storage is in eMMC, the rootfs is flashed to this partition. U-Boot expects boot script, kernel, and DTB files in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> directory; consequently, <span class="Code_Char">flash.sh</span> flashes the following kernel files in the APP partition:</div><div id="wwpID0E0AO0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>kernel (<span class="Code_Char">zImage)</span></div><div id="wwpID0E06N0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>device_tree_blob (<span class="Code_Char">tegra124-jetson_tk1-pm375-000-c00-00.dtb</span>)</div><div id="wwpID0E05N0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span><span class="Code_Char">sysboot_config</span> (<span class="Code_Char">extlinux.conf</span>)</div><div id="wwpID0E04N0HA" class="List_Continue"><span class="Strong">Note: </span>The<span class="Strong"> </span><span class="Code_Char">flash.sh</span> script treats the rootfs-on-IP-network configuration as a special case and also flashes these kernel files in the <span class="Code_Char">&lt;APP partition&gt;:/boot</span> directory.</div><div id="wwpID0E03N0HA" class="Heading_5">Example Full Internal eMMC Partition Layout</div><div id="wwpID0E02N0HA" class="Body_Text">An eMMC layout configuration file (cfg) generally has the following contents. The actual configuration file is named: <span class="Code_Char">gnu_linux_fastboot_emmc_full.cfg</span> file.</div><div id="wwpID0E01N0HA" class="List_Continue"><span class="Strong">Note:</span> Under default settings, U-Boot does not use the kernel partition (LNX).</div><div id="wwpID0E0ZN0HA" class="Code">[device]</div><div id="wwpID0E0YN0HA" class="Code">type=sdmmc</div><div id="wwpID0E0XN0HA" class="Code">instance=3</div><div id="wwpID0E0WN0HA" class="Code">&nbsp;</div><div id="wwpID0E0VN0HA" class="Code">[partition]</div><div id="wwpID0E0UN0HA" class="Code">name=BCT</div><div id="wwpID0E0TN0HA" class="Code">id=2</div><div id="wwpID0E0SN0HA" class="Code">type=boot_config_table</div><div id="wwpID0E0RN0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0QN0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0PN0HA" class="Code">size=2097152		#BCTSIZE</div><div id="wwpID0E0ON0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0NN0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0MN0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0LN0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0KN0HA" class="Code">&nbsp;</div><div id="wwpID0E0JN0HA" class="Code">[partition]</div><div id="wwpID0E0IN0HA" class="Code">name=PPT</div><div id="wwpID0E0HN0HA" class="Code">id=3</div><div id="wwpID0E0GN0HA" class="Code">type=data</div><div id="wwpID0E0FN0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0EN0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0DN0HA" class="Code">size=8388608		#PPTSIZE</div><div id="wwpID0E0CN0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0BN0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0AN0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E06M0HA" class="Code">percent_reserved=0</div><div id="wwpID0E05M0HA" class="Code">#filename=ppt.img</div><div id="wwpID0E04M0HA" class="Code">&nbsp;</div><div id="wwpID0E03M0HA" class="Code">[partition]</div><div id="wwpID0E02M0HA" class="Code">name=PT</div><div id="wwpID0E01M0HA" class="Code">id=4</div><div id="wwpID0E0ZM0HA" class="Code">type=partition_table</div><div id="wwpID0E0YM0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0XM0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0WM0HA" class="Code">size=2097152</div><div id="wwpID0E0VM0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0UM0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0TM0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0SM0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0RM0HA" class="Code">&nbsp;</div><div id="wwpID0E0QM0HA" class="Code">[partition]</div><div id="wwpID0E0PM0HA" class="Code">name=EBT</div><div id="wwpID0E0OM0HA" class="Code">id=5</div><div id="wwpID0E0NM0HA" class="Code">type=bootloader</div><div id="wwpID0E0MM0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0LM0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0KM0HA" class="Code">size=4194304</div><div id="wwpID0E0JM0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0IM0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0HM0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0GM0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0FM0HA" class="Code">filename=fastboot.bin</div><div id="wwpID0E0EM0HA" class="Code">&nbsp;</div><div id="wwpID0E0DM0HA" class="Code">[partition]</div><div id="wwpID0E0CM0HA" class="Code">name=LNX</div><div id="wwpID0E0BM0HA" class="Code">id=6</div><div id="wwpID0E0AM0HA" class="Code">type=data</div><div id="wwpID0E06L0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E05L0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E04L0HA" class="Code">size=16777216</div><div id="wwpID0E03L0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E02L0HA" class="Code">partition_attribute=0</div><div id="wwpID0E01L0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0ZL0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0YL0HA" class="Code">filename=boot.img</div><div id="wwpID0E0XL0HA" class="Code">&nbsp;</div><div id="wwpID0E0WL0HA" class="Code">[partition]</div><div id="wwpID0E0VL0HA" class="Code">name=SOS</div><div id="wwpID0E0UL0HA" class="Code">id=7</div><div id="wwpID0E0TL0HA" class="Code">type=data</div><div id="wwpID0E0SL0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0RL0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0QL0HA" class="Code">size=6291456</div><div id="wwpID0E0PL0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0OL0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0NL0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0ML0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0LL0HA" class="Code">#filename=recovery.img</div><div id="wwpID0E0KL0HA" class="Code">&nbsp;</div><div id="wwpID0E0JL0HA" class="Code">[partition]</div><div id="wwpID0E0IL0HA" class="Code">name=NVC</div><div id="wwpID0E0HL0HA" class="Code">id=8</div><div id="wwpID0E0GL0HA" class="Code">type=data		#TEGRABOOT</div><div id="wwpID0E0FL0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0EL0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0DL0HA" class="Code">size=2097152</div><div id="wwpID0E0CL0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0BL0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0AL0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E06K0HA" class="Code">percent_reserved=0</div><div id="wwpID0E05K0HA" class="Code">#filename=nvtboot.bin</div><div id="wwpID0E04K0HA" class="Code">&nbsp;</div><div id="wwpID0E03K0HA" class="Code">[partition]</div><div id="wwpID0E02K0HA" class="Code">name=MPB</div><div id="wwpID0E01K0HA" class="Code">id=9</div><div id="wwpID0E0ZK0HA" class="Code">type=data		#MTSPREBOOT</div><div id="wwpID0E0YK0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0XK0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0WK0HA" class="Code">size=6291456</div><div id="wwpID0E0VK0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0UK0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0TK0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0SK0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0RK0HA" class="Code">#filename=mts_preboot_si</div><div id="wwpID0E0QK0HA" class="Code">&nbsp;</div><div id="wwpID0E0PK0HA" class="Code">[partition]</div><div id="wwpID0E0OK0HA" class="Code">name=MBP</div><div id="wwpID0E0NK0HA" class="Code">id=10</div><div id="wwpID0E0MK0HA" class="Code">type=data		#MTSBOOTPACK</div><div id="wwpID0E0LK0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0KK0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0JK0HA" class="Code">size=6291456</div><div id="wwpID0E0IK0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0HK0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0GK0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0FK0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0EK0HA" class="Code">#filename=mts_si</div><div id="wwpID0E0DK0HA" class="Code">&nbsp;</div><div id="wwpID0E0CK0HA" class="Code">[partition]</div><div id="wwpID0E0BK0HA" class="Code">name=GP1</div><div id="wwpID0E0AK0HA" class="Code">id=11</div><div id="wwpID0E06J0HA" class="Code">type=GP1</div><div id="wwpID0E05J0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E04J0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E03J0HA" class="Code">size=2097152</div><div id="wwpID0E02J0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E01J0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0ZJ0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0YJ0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0XJ0HA" class="Code">&nbsp;</div><div id="wwpID0E0WJ0HA" class="Code">[partition]</div><div id="wwpID0E0VJ0HA" class="Code">name=APP</div><div id="wwpID0E0UJ0HA" class="Code">id=12</div><div id="wwpID0E0TJ0HA" class="Code">type=data</div><div id="wwpID0E0SJ0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0RJ0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0QJ0HA" class="Code">size=1073741824</div><div id="wwpID0E0PJ0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0OJ0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0NJ0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0MJ0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0LJ0HA" class="Code">filename=system.img</div><div id="wwpID0E0KJ0HA" class="Code">&nbsp;</div><div id="wwpID0E0JJ0HA" class="Code">[partition]</div><div id="wwpID0E0IJ0HA" class="Code">name=DTB</div><div id="wwpID0E0HJ0HA" class="Code">id=13</div><div id="wwpID0E0GJ0HA" class="Code">type=data</div><div id="wwpID0E0FJ0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0EJ0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0DJ0HA" class="Code">size=4194304</div><div id="wwpID0E0CJ0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0BJ0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0AJ0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E06I0HA" class="Code">percent_reserved=0</div><div id="wwpID0E05I0HA" class="Code">#filename=tegra.dtb</div><div id="wwpID0E04I0HA" class="Code">&nbsp;</div><div id="wwpID0E03I0HA" class="Code">[partition]</div><div id="wwpID0E02I0HA" class="Code">name=EFI</div><div id="wwpID0E01I0HA" class="Code">id=14</div><div id="wwpID0E0ZI0HA" class="Code">type=data</div><div id="wwpID0E0YI0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0XI0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0WI0HA" class="Code">size=67108864		#EFISIZE</div><div id="wwpID0E0VI0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0UI0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0TI0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0SI0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0RI0HA" class="Code">#filename=efi.img</div><div id="wwpID0E0QI0HA" class="Code">&nbsp;</div><div id="wwpID0E0PI0HA" class="Code">[partition]</div><div id="wwpID0E0OI0HA" class="Code">name=USP</div><div id="wwpID0E0NI0HA" class="Code">id=15</div><div id="wwpID0E0MI0HA" class="Code">type=data</div><div id="wwpID0E0LI0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0KI0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0JI0HA" class="Code">size=4194304</div><div id="wwpID0E0II0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0HI0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0GI0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0FI0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0EI0HA" class="Code">&nbsp;</div><div id="wwpID0E0DI0HA" class="Code">[partition]</div><div id="wwpID0E0CI0HA" class="Code">name=TP1</div><div id="wwpID0E0BI0HA" class="Code">id=16</div><div id="wwpID0E0AI0HA" class="Code">type=data</div><div id="wwpID0E06H0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E05H0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E04H0HA" class="Code">size=4194304</div><div id="wwpID0E03H0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E02H0HA" class="Code">partition_attribute=0</div><div id="wwpID0E01H0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0ZH0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0YH0HA" class="Code">&nbsp;</div><div id="wwpID0E0XH0HA" class="Code">[partition]</div><div id="wwpID0E0WH0HA" class="Code">name=TP2</div><div id="wwpID0E0VH0HA" class="Code">id=17</div><div id="wwpID0E0UH0HA" class="Code">type=data</div><div id="wwpID0E0TH0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0SH0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0RH0HA" class="Code">size=4194304</div><div id="wwpID0E0QH0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0PH0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0OH0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0NH0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0MH0HA" class="Code">&nbsp;</div><div id="wwpID0E0LH0HA" class="Code">[partition]</div><div id="wwpID0E0KH0HA" class="Code">name=TP3</div><div id="wwpID0E0JH0HA" class="Code">id=18</div><div id="wwpID0E0IH0HA" class="Code">type=data</div><div id="wwpID0E0HH0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0GH0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0FH0HA" class="Code">size=4194304</div><div id="wwpID0E0EH0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0DH0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0CH0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0BH0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0AH0HA" class="Code">&nbsp;</div><div id="wwpID0E06G0HA" class="Code">[partition]</div><div id="wwpID0E05G0HA" class="Code">name=WB0</div><div id="wwpID0E04G0HA" class="Code">id=19</div><div id="wwpID0E03G0HA" class="Code">type=data	#WB0BOOT</div><div id="wwpID0E02G0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E01G0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0ZG0HA" class="Code">size=2097152</div><div id="wwpID0E0YG0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0XG0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0WG0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E0VG0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0UG0HA" class="Code">#filename=nvtbootwb0.bin</div><div id="wwpID0E0TG0HA" class="Code">&nbsp;</div><div id="wwpID0E0SG0HA" class="Code">[partition]</div><div id="wwpID0E0RG0HA" class="Code">name=UDA</div><div id="wwpID0E0QG0HA" class="Code">id=20</div><div id="wwpID0E0PG0HA" class="Code">type=data</div><div id="wwpID0E0OG0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0NG0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0MG0HA" class="Code">size=2097152</div><div id="wwpID0E0LG0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E0KG0HA" class="Code">partition_attribute=0</div><div id="wwpID0E0JG0HA" class="Code">allocation_attribute=0x808</div><div id="wwpID0E0IG0HA" class="Code">percent_reserved=0</div><div id="wwpID0E0HG0HA" class="Code">&nbsp;</div><div id="wwpID0E0GG0HA" class="Code">[partition]</div><div id="wwpID0E0FG0HA" class="Code">name=GPT</div><div id="wwpID0E0EG0HA" class="Code">id=21</div><div id="wwpID0E0DG0HA" class="Code">type=GPT</div><div id="wwpID0E0CG0HA" class="Code">allocation_policy=sequential</div><div id="wwpID0E0BG0HA" class="Code">filesystem_type=basic</div><div id="wwpID0E0AG0HA" class="Code">size=0xFFFFFFFFFFFFFFFF</div><div id="wwpID0E06F0HA" class="Code">file_system_attribute=0</div><div id="wwpID0E05F0HA" class="Code">partition_attribute=0</div><div id="wwpID0E04F0HA" class="Code">allocation_attribute=8</div><div id="wwpID0E03F0HA" class="Code">percent_reserved=0</div><div id="wwpID0E02F0HA" class="Code">#filename=spt.img</div><div id="wwpID0E01F0HA" class="Heading_2">Testing RootFS By Device</div><div id="wwpID0E0ZF0HA" class="Body_Text">You should test the root file system location by device. A Y in the output indicates that correct U-Boot initialization and hand-off to the kernel occurred. </div><div class="ww_skin_page_overflow"><table class="Table_Normal" cellspacing="0" summary=""><tr><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 184.15pt"><div id="wwpID0EABF0YF0HA" class="Cell_Heading">RootFS Location</div></td><td style="background-color: #DDEEBF; border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top; width: 217.6pt"><div id="wwpID0EAAF0YF0HA" class="Cell_Heading">Jetson TK1</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABE0YF0HA" class="Cell_Text">mmcblk0p1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAE0YF0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABD0YF0HA" class="Cell_Text">mmcblk1p1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAD0YF0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABC0YF0HA" class="Cell_Text">sda1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAC0YF0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABB0YF0HA" class="Cell_Text">eth0</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAB0YF0HA" class="Cell_Text">Y</div></td></tr><tr><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EABA0YF0HA" class="Cell_Text">eth1</div></td><td style="border-bottom-color: Silver; border-bottom-style: solid; border-bottom-width: thin; border-left-color: Silver; border-left-style: solid; border-left-width: thin; border-right-color: Silver; border-right-style: solid; border-right-width: thin; border-top-color: Silver; border-top-style: solid; border-top-width: thin; padding-bottom: 3pt; padding-left: 3pt; padding-right: 3pt; padding-top: 3pt; vertical-align: top"><div id="wwpID0EAAA0YF0HA" class="Cell_Text">Y</div></td></tr></table></div><div id="wwpID0E0XF0HA" class="Heading_2">Building Device Tree Compiler</div><div id="wwpID0E0WF0HA" class="Body_Text">Build the Device Tree Compiler (DTC) from source code included in L4T, specifying the features required by the U-Boot makefile.</div><div id="wwpID0E0VF0HA" class="Number_Continue"><span class="Strong">Note</span>: In the procedure below, if you do not want to pass in dtc as a parameter to the U‑Boot environment, ensure a local command path (such as<span class="Code_Char"> ./usr/local/bin</span> or another choice) is at the beginning of the shell command path. Furthermore, if you execute (in the last step):</div><div id="wwpID0E0UF0HA" class="Number_Continue"><span class="Code_Char">$ make install</span></div><div id="wwpID0E0TF0HA" class="Number_Continue">the dtc makefile installs the binary into the first entry of shell PATH variable. Therefore, it is important that the local command path is at the beginning of the shell PATH variable.</div><div id="wwpID0E0SF0HA" class="Heading_5">To build DTC from source</div><div id="wwpID0E0RF0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Execute the following commands:</div><div id="wwpID0E0QF0HA" class="Code">$ export PATH=&lt;local_command_path&gt;:${PATH}</div><div id="wwpID0E0PF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Create a directory to contain the dtc source code and change directories into it:</div><div id="wwpID0E0OF0HA" class="Code">$ mkdir -p &lt;dtc_src_dir&gt;</div><div id="wwpID0E0NF0HA" class="Code">$ cd &lt;dtc_src_dir&gt;</div><div id="wwpID0E0MF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Download dtc source code by executing the following <span class="Code_Char">git clone</span> command:</div><div id="wwpID0E0LF0HA" class="Code">$ git clone git://git.kernel.org/pub/scm/utils/dtc/dtc.git</div><div id="wwpID0E0KF0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Build and optionally install dtc by executing:</div><div id="wwpID0E0JF0HA" class="Code">$ cd &lt;dtc_src_dir&gt;/dtc</div><div id="wwpID0E0IF0HA" class="Code">$ make</div><div id="wwpID0E0HF0HA" class="Number_Continue">Or, alternatively, if you want it installed on your local host file system execute:</div><div id="wwpID0E0GF0HA" class="Code">$ make install</div><div id="wwpID0E0FF0HA" class="Heading_2">Adding a Compiled Kernel to the Root File System</div><div id="wwpID0E0EF0HA" class="Body_Text">U-Boot requires a kernel image on the rootfs. First you must configure the file system for U-Boot. Then you add the kernel image to the rootfs.</div><div id="wwpID0E0DF0HA" class="Heading_5">Prerequisite</div><div id="wwpID0E0CF0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>You have compiled the kernel as described in <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> in this guide.</div><div id="wwpID0E0BF0HA" class="Heading_5">To configure a file system for U-Boot</div><div id="wwpID0E0AF0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Use the <span class="Code_Char">apply_binaries</span> script to copy the <span class="Code_Char">zImage</span> in the kernel directory into the <span class="Code_Char">rootfs</span> directory in the <span class="Code_Char">/boot</span> folder. </div><div id="wwpID0E06E0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Install the <span class="Code_Char">rootfs</span> directory onto your device. </div><div id="wwpID0E05E0HA" class="List_Continue">For U-Boot to function properly, there must be <span class="Code_Char">zImage</span> and <span class="Code_Char">dtb</span> files in the <span class="Code_Char">/boot</span> directory of the target file system.</div><div id="wwpID0E04E0HA" class="List_Continue">For more information on installing the <span class="Code_Char">rootfs</span> directory onto your device, see <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#wwpID0E0NJ0HA" title="Getting Started">Setting Up the Root File System</a></span> in the <span class="Hyperlink"><a href="../Tegra%20Linux%20Driver%20Package%20Development%20Guide/l4t_getting_started.html#" title="Getting Started">Getting Started</a></span> chapter. </div><div id="wwpID0E03E0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>If you have already installed your rootfs onto a device, manually copy the <span class="Code_Char">zImage</span> file and <span class="Code_Char">dtb</span> files to the installed root file system.</div><div id="wwpID0E02E0HA" class="Heading_5">To configure a file system installed in the internal eMMC</div><div id="wwpID0E01E0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Optionally, backup the existing release kernel and dtb files to avoid overwriting.</div><div id="wwpID0E0ZE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the compiled <span class="Code_Char">zImage</span> and <span class="Code_Char">dtb</span> files over the current L4T release kernel directory by executing the following commands:</div><div id="wwpID0E0YE0HA" class="Code_Indent">$ cp arch/arm/boot/zImage &lt;L4T_path&gt;/Linux_for_Tegra/kernel</div><div id="wwpID0E0XE0HA" class="Code_Indent">$ cp arch/arm/boot/dts/tegra124-jetson_tk1-pm375-000-c00-00.dtb &lt;L4T_path&gt;/Linux_for_Tegra/kernel/dtb</div><div id="wwpID0E0WE0HA" class="Number_Continue"><span class="Code_Char">flash.sh</span> automatically copies the <span class="Code_Char">zImage</span> to the internal eMMC rootfs.</div><div id="wwpID0E0VE0HA" class="Heading_3">Adding a new Kernel</div><div id="wwpID0E0UE0HA" class="Body_Text">After U-Boot has been flashed as the default boot loader, you can replace the kernel. The procedure you should follow depends on the kind of storage device from which your device boots.</div><div id="wwpID0E0TE0HA" class="Heading_5">To replace the kernel in systems that boot from internal eMMC</div><div id="wwpID0E0SE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson TK1 system and log in.</div><div id="wwpID0E0RE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files (using <span class="Code_Char">scp</span>) into the <span class="Code_Char">/boot</span> directory.</div><div id="wwpID0E0QE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Reboot the Jetson TK1 system.</div><div id="wwpID0E0PE0HA" class="Heading_5">To replace the kernel in systems that boot from an SD Card or USB Pen Drive</div><div id="wwpID0E0OE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Connect the SD Card or USB Pen Drive to your host system.</div><div id="wwpID0E0NE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>Copy the new kernel files to a <span class="Code_Char">/boot</span> directory on the SD Card or USB Pen Drive.</div><div id="wwpID0E0ME0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Disconnect the SD Card or USB Pen Drive from the host system.</div><div id="wwpID0E0LE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Connect the SD Card or USB Pen Drive to the Jetson TK1 system.</div><div id="wwpID0E0KE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>5.	</span></span>Reboot the Jetson TK1 system.</div><div id="wwpID0E0JE0HA" class="Heading_5">To replace the kernel in systems that boot from an IP network</div><div id="wwpID0E0IE0HA" class="List_Number" style="margin-left: 54pt; text-indent: -18pt"><span class="WebWorks_Number" style="width: 18pt"><span>1.	</span></span>Boot the Jetson TK1 system and log in.</div><div id="wwpID0E0HE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>2.	</span></span>On the target system enter the following command:</div><div id="wwpID0E0GE0HA" class="Code">$ sudo mount /dev/mmcblk0p1 /mnt</div><div id="wwpID0E0FE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>3.	</span></span>Copy the new kernel files (using <span class="Code_Char">scp</span>) to the <span class="Code_Char">mnt/boot</span> directory.</div><div id="wwpID0E0EE0HA" class="List_Number"><span class="WebWorks_Number" style="width: 18pt"><span>4.	</span></span>Reboot the Jetson TK1 system.</div><div id="wwpID0E0DE0HA" class="Heading_2">Example Sysboot Configuration Files</div><div id="wwpID0E0CE0HA" class="Body_Text">For external media, you must copy the rootfs to the device <span class="Strong">after</span> running the <span class="Code_Char">flash.sh</span> command. Then you attach the device.</div><div id="wwpID0E0BE0HA" class="Body_Text">The U-Boot functionality includes a default booting scan sequence. It scans bootable devices in the following order:</div><div id="wwpID0E0AE0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>External SD Card</div><div id="wwpID0E06D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Internal eMMC</div><div id="wwpID0E05D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>USB Device</div><div id="wwpID0E04D0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>NFS Device</div><div id="wwpID0E03D0HA" class="Body_Text">It looks for an <span class="Code_Char">extlinux.conf</span> configuration file in the following directory of the bootable device:</div><div id="wwpID0E02D0HA" class="Code">&lt;rootfs&gt;/boot/extlinux</div><div id="wwpID0E01D0HA" class="Body_Text">Upon finding the <span class="Code_Char">extlinux.conf</span> file, U-Boot does the following.</div><div id="wwpID0E0ZD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Uses the <span class="Code_Char">sysboot</span> command to read out boot configuration from <span class="Code_Char">extlinux.conf,</span></div><div id="wwpID0E0YD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Loads kernel <span class="Code_Char">zImage</span> file and device tree file, and then</div><div id="wwpID0E0XD0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Boots the kernel.</div><div id="wwpID0E0WD0HA" class="Body_Text">The <span class="Code_Char">zImage</span> and device tree files are all user-accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot</span> location after booting. The <span class="Code_Char">extlinux.conf</span> file is user accessible in the <span class="Code_Char">&lt;rootfs&gt;/boot/extlinux</span> location. Users can easily change these files to test their own kernel without flashing.</div><div id="wwpID0E0VD0HA" class="Body_Text">The file <span class="Code_Char">extlinux.conf</span> is a standard text-format sysboot configuration file that contains all boot information. It indicates the U-Boot kernel image filename, the device tree blob filename, and the kernel boot command line. There are four example <span class="Code_Char">extlinux.conf</span> files provided in the L4T release:</div><div id="wwpID0E0UD0HA" class="Code">&lt;target_board&gt;_extlinux.conf.emmc</div><div id="wwpID0E0TD0HA" class="Code">&lt;target_board&gt;_extlinux.conf.sdcard</div><div id="wwpID0E0SD0HA" class="Code">&lt;target_board&gt;_extlinux.conf.usb</div><div id="wwpID0E0RD0HA" class="Code">&lt;target_board&gt;_extlinux.conf.nfs</div><div id="wwpID0E0QD0HA" class="Body_Text">During flashing, <span class="Code_Char">flash.sh</span> copies the appropriate variant to the following location:</div><div id="wwpID0E0PD0HA" class="Code">&lt;rootfs&gt;/boot/extlinux/extlinux.conf</div><div id="wwpID0E0OD0HA" class="Body_Text">The <span class="Code_Char">extlinux.conf</span> files are very similar except for different kernel boot command lines. You can find the <span class="Code_Char">extlinux.conf</span> files in the following location:</div><div id="wwpID0E0ND0HA" class="Code">bootloader/&lt;platform&gt;/</div><div id="wwpID0E0MD0HA" class="Body_Text">Where <span class="Code_Char">&lt;platform&gt;</span> is <span class="Code_Char">ardbeg</span> for Jetson TK1.</div><div id="wwpID0E0LD0HA" class="Heading_3">eMMC Sysboot extlinux.conf File</div><div id="wwpID0E0KD0HA" class="Body_Text">The  <span class="Code_Char">extlinux.conf</span> file has the following contents.</div><div id="wwpID0E0JD0HA" class="Code">TIMEOUT 30</div><div id="wwpID0E0ID0HA" class="Code">DEFAULT primary</div><div id="wwpID0E0HD0HA" class="Code">&nbsp;</div><div id="wwpID0E0GD0HA" class="Code">MENU TITLE Jetson-TK1 eMMC boot option</div><div id="wwpID0E0FD0HA" class="Code">&nbsp;</div><div id="wwpID0E0ED0HA" class="Code">LABEL primary</div><div id="wwpID0E0DD0HA" class="Code">&nbsp; &nbsp; &nbsp; MENU LABEL primary kernel</div><div id="wwpID0E0CD0HA" class="Code">&nbsp; &nbsp; &nbsp; LINUX zImage</div><div id="wwpID0E0BD0HA" class="Code">&nbsp; &nbsp; &nbsp; FDT /boot/tegra124-jetson_tk1-pm375-000-c00-00.dtb</div><div id="wwpID0E0AD0HA" class="Code">&nbsp; &nbsp; &nbsp; APPEND console=ttyS0,115200n8 console=tty1 no_console_suspend=1</div><div id="wwpID0E06C0HA" class="Code">lp0_vec=2064@0xf46ff000 video=tegrafb mem=1862M@2048M memtype=255</div><div id="wwpID0E05C0HA" class="Code">ddr_die=2048M@2048M section=256M pmuboard=0x0177:0x0000:0x02:0x43:0x00</div><div id="wwpID0E04C0HA" class="Code">vpr=151M@3945M tsec=32M@3913M otf_key=c75e5bb91eb3bd947560357b64422f85</div><div id="wwpID0E03C0HA" class="Code">usbcore.old_scheme_first=1 core_edp_mv=1150 core_edp_ma=4000</div><div id="wwpID0E02C0HA" class="Code">tegraid=40.1.1.0.0 debug_uartport=lsport,3 power_supply=Adapter</div><div id="wwpID0E01C0HA" class="Code">audio_codec=rt5640 modem_id=0 android.kerneltype=normal</div><div id="wwpID0E0ZC0HA" class="Code">usb_port_owner_info=0 fbcon=map:1 commchip_id=0 usb_port_owner_info=0</div><div id="wwpID0E0YC0HA" class="Code">lane_owner_info=6 emc_max_dvfs=0 touch_id=0@0</div><div id="wwpID0E0XC0HA" class="Code">tegra_fbmem=32899072@0xad012000</div><div id="wwpID0E0WC0HA" class="Code">board_info=0x0177:0x0000:0x02:0x43:0x00 root=/dev/mmcblk0p1 rw</div><div id="wwpID0E0VC0HA" class="Code">rootwait tegraboot=sdmmc gpt</div><div id="wwpID0E0UC0HA" class="Body_Text">Different boot methods have different APPEND strings in the <span class="Code_Char">extlinux.conf</span> file. Check each file for details.</div><div id="wwpID0E0TC0HA" class="Body_Text"><span style="font-weight: bold">Note:</span> NFS booting also uses eMMC as boot device. <span class="Code_Char">&lt;rootfs&gt;/boot</span> is flashed into to eMMC but kernel mounts NFS device as <span class="Code_Char">rootfs</span>. </div><div id="wwpID0E0SC0HA" class="Heading_2">Debugging U-Boot Environment</div><div id="wwpID0E0RC0HA" class="Body_Text">Use these debugging tips to help you debug your U-Boot environment. These examples do not represent a comprehensive listing of U-Boot functionality. For a full list of supported commands and their usage by U-Boot, consult U-Boot documentation and source.</div><div id="wwpID0E0QC0HA" class="Body_Text">When creating your own kernel, U-Boot sometimes has trouble finding it. To eliminate this issue, use the commands in these examples to verify that U-Boot can read the device and can see the files in the system. If a boot device is not found, or the device has trouble booting with a kernel other than the reference kernel provided in the L4T release, review these examples for debugging purposes.</div><div id="wwpID0E0PC0HA" class="Heading_3">Interrupting U-Boot</div><div id="wwpID0E0OC0HA" class="Body_Text">You can interrupt U-Boot during boot.</div><div id="wwpID0E0NC0HA" class="Heading_5">To interrupt U-Boot</div><div id="wwpID0E0MC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Press any key during boot. </div><div id="wwpID0E0LC0HA" class="Heading_3">Getting Help</div><div id="wwpID0E0KC0HA" class="Body_Text">On the U‑Boot terminal screen, type <span class="Code_Char">help</span> at any time for the list of supported commands from the U‑Boot terminal.</div><div id="wwpID0E0JC0HA" class="Heading_5">To see the U-Boot Help text</div><div id="wwpID0E0IC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>To see the U-Boot help text enter the following command:</div><div id="wwpID0E0HC0HA" class="Code_Indent"># help</div><div id="wwpID0E0GC0HA" class="List_Continue">The following example Help information is printed when executing help on a Jetson TK1 device.</div><div id="wwpID0E0FC0HA" class="Code_Indent">? &nbsp; &nbsp; &nbsp; - alias for 'help'<br>base &nbsp; &nbsp;- print or set address offset<br>bdinfo &nbsp;- print Board Info structure<br>boot &nbsp; &nbsp;- boot default, i.e., run 'bootcmd'<br>bootd &nbsp; - boot default, i.e., run 'bootcmd'<br>bootelf - Boot from an ELF image in memory<br>bootm &nbsp; - boot application image from memory<br>bootp &nbsp; - boot image via network using BOOTP/TFTP protocol<br>bootvx &nbsp;- Boot vxWorks from an ELF image<br>bootz &nbsp; - boot Linux zImage image from memory<br>cmp &nbsp; &nbsp; - memory compare<br>coninfo - print console devices and information<br>cp &nbsp; &nbsp; &nbsp;- memory copy<br>crc32 &nbsp; - checksum calculation<br>dfu     - Device Firmware Upgrade<br>dhcp    - boot image via network using DHCP/TFTP protocol<br>dm      - Driver model low level access<br>echo &nbsp; &nbsp;- echo args to console<br>editenv - edit environment variable<br>enterrcm- reset Tegra and enter USB Recovery Mode<br>env &nbsp; &nbsp; - environment handling commands<br>exit &nbsp; &nbsp;- exit script<br>ext2load- load binary file from a Ext2 filesystem<br>ext2ls &nbsp;- list files in a directory (default /)<br>ext4load- load binary file from a Ext4 filesystem<br>ext4ls &nbsp;- list files in a directory (default /)<br>false &nbsp; - do nothing, unsuccessfully<br>fatinfo - print information about filesystem<br>fatload - load binary file from a dos filesystem<br>fatls &nbsp; - list files in a directory (default /)<br>fdt &nbsp; &nbsp; - flattened device tree utility commands<br>go &nbsp; &nbsp; &nbsp;- start application at address 'addr'<br>gpio &nbsp; &nbsp;- query and control gpio pins<br>help &nbsp; &nbsp;- print command description/usage<br>i2c &nbsp; &nbsp; - I2C sub-system<br>imxtract- extract a part of a multi-image<br>itest &nbsp; - return true/false on integer compare<br>load &nbsp; &nbsp;- load binary file from a filesystem<br>loadb &nbsp; - load binary file over serial line (kermit mode)<br>loads &nbsp; - load S-Record file over serial line<br>loadx &nbsp; - load binary file over serial line (xmodem mode)<br>loady &nbsp; - load binary file over serial line (ymodem mode)<br>loop &nbsp; &nbsp;- infinite loop on address range<br>ls &nbsp; &nbsp; &nbsp;- list files in a directory (default /)<br>md &nbsp; &nbsp; &nbsp;- memory display<br>mii &nbsp; &nbsp; - MII utility commands<br>mm &nbsp; &nbsp; &nbsp;- memory modify (auto-incrementing address)<br>mmc &nbsp; &nbsp; - MMC sub system<br>mmcinfo - display MMC info<br>mw &nbsp; &nbsp; &nbsp;- memory write (fill)<br>nm &nbsp; &nbsp; &nbsp;- memory modify (constant address)<br>part &nbsp; &nbsp;- disk partition related commands<br>pci     - list and access PCI Configuration Space<br>ping &nbsp; &nbsp;- send ICMP ECHO_REQUEST to network host<br>printenv- print environment variables<br>pxe &nbsp; &nbsp; - commands to get and boot from pxe files<br>reset &nbsp; - Perform RESET of the CPU<br>run &nbsp; &nbsp; - run commands in an environment variable<br>saveenv - save environment variables to persistent storage<br>setenv &nbsp;- set environment variables<br>sf &nbsp; &nbsp; &nbsp;- SPI flash sub-system<br>showvar - print local hushshell variables<br>size    - determine a file’s size<br>sleep &nbsp; - delay execution for some timesource &nbsp;- run script from memorysspi &nbsp; &nbsp;- SPI utility command<br>sysboot - command to get and boot from syslinux files<br>test &nbsp; &nbsp;- minimal test like /bin/sh<br>tftpboot- boot image via network using TFTP protocol<br>true &nbsp; &nbsp;- do nothing, successfully<br>ums     - Use the UMS [User Mass Storage]<br>usb &nbsp; &nbsp; - USB sub-system<br>usbboot - boot from USB device<br>version - print monitor, compiler and linker version</div><div id="wwpID0E0EC0HA" class="Heading_3">Listing a Directory Structure</div><div id="wwpID0E0DC0HA" class="Body_Text">You can list the directory structure of a particular device. For example, to list the directory structure of sda1 in U‑Boot by type: <span class="Code_Char">mmc 0:1</span> (for eMMC device 0 partition 1).</div><div id="wwpID0E0CC0HA" class="Heading_5">To list the directory structure</div><div id="wwpID0E0BC0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>To list the directory structure enter the following command:</div><div id="wwpID0E0AC0HA" class="Code"># ext2ls mmc 0:1</div><div id="wwpID0E06B0HA" class="List_Continue">This also functions correctly on EXT3/EXT4 file systems.</div><div id="wwpID0E05B0HA" class="List_Continue">Example output follows:</div><div id="wwpID0E04B0HA" class="Code"> &lt;DIR&gt;       4096 .</div><div id="wwpID0E03B0HA" class="Code"> &lt;DIR&gt;       4096 ..</div><div id="wwpID0E02B0HA" class="Code"> &lt;DIR&gt;       4096 bin</div><div id="wwpID0E01B0HA" class="Code"> &lt;DIR&gt;       4096 boot</div><div id="wwpID0E0ZB0HA" class="Code"> &lt;DIR&gt;       4096 dev</div><div id="wwpID0E0YB0HA" class="Code"> &lt;DIR&gt;       4096 etc</div><div id="wwpID0E0XB0HA" class="Code"> &lt;DIR&gt;       4096 home</div><div id="wwpID0E0WB0HA" class="Code"> &lt;DIR&gt;       4096 lib</div><div id="wwpID0E0VB0HA" class="Code"> &lt;DIR&gt;       4096 lost+found</div><div id="wwpID0E0UB0HA" class="Code"> &lt;DIR&gt;       4096 media</div><div id="wwpID0E0TB0HA" class="Code"> &lt;DIR&gt;       4096 mnt</div><div id="wwpID0E0SB0HA" class="Code"> &lt;DIR&gt;       4096 opt</div><div id="wwpID0E0RB0HA" class="Code"> &lt;DIR&gt;       4096 proc</div><div id="wwpID0E0QB0HA" class="Code"> &lt;DIR&gt;       4096 root</div><div id="wwpID0E0PB0HA" class="Code"> &lt;DIR&gt;       4096 sbin</div><div id="wwpID0E0OB0HA" class="Code"> &lt;DIR&gt;       4096 selinux</div><div id="wwpID0E0NB0HA" class="Code"> &lt;DIR&gt;       4096 srv</div><div id="wwpID0E0MB0HA" class="Code"> &lt;DIR&gt;       4096 sys</div><div id="wwpID0E0LB0HA" class="Code"> &lt;DIR&gt;       4096 tmp</div><div id="wwpID0E0KB0HA" class="Code"> &lt;DIR&gt;       4096 usr</div><div id="wwpID0E0JB0HA" class="Code"> &lt;DIR&gt;       4096 var</div><div id="wwpID0E0IB0HA" class="Heading_3">Listing the Contents of a Directory</div><div id="wwpID0E0HB0HA" class="Body_Text">You can list the contents of any directory.</div><div id="wwpID0E0GB0HA" class="Heading_5">To list the contents of a directory</div><div id="wwpID0E0FB0HA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>List directory contents with the following command:</div><div id="wwpID0E0EB0HA" class="Code"># ext2ls mmc 0:1 &lt;directory&gt;</div><div id="wwpID0E0DB0HA" class="List_Continue">Where <span class="Code_Char">&lt;directory&gt;</span> is an expected path on the device.</div><div id="wwpID0E0CB0HA" class="List_Continue">For example, to list contents of the <span class="Code_Char">/boot</span> directory where the <span class="Code_Char">zImage</span> file should be, (as shown in the example output below), use the following command:</div><div id="wwpID0E0BB0HA" class="Code"># ext2ls mmc 0:1 /boot</div><div id="wwpID0E0AB0HA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 .</div><div id="wwpID0E6HA" class="Code">&lt;DIR&gt; &nbsp; &nbsp; &nbsp; 1024 ..</div><div id="wwpID0E5HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;34642 tegra124-pm375.dtb</div><div id="wwpID0E4HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;908 extlinux.conf</div><div id="wwpID0E3HA" class="Code">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5910248 zImage</div><div id="wwpID0E2HA" class="Heading_3">Printing the U-Boot Environment</div><div id="wwpID0E1HA" class="Body_Text">You can print the entire U‑Boot environment.</div><div id="wwpID0EZHA" class="Heading_5">To print the U-Boot environment</div><div id="wwpID0EYHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EXHA" class="Code"># printenv</div><div id="wwpID0EWHA" class="Heading_3">Printing/Setting Environment Variables</div><div id="wwpID0EVHA" class="Body_Text">You can print and set environment variables.</div><div id="wwpID0EUHA" class="Heading_5">To print an environment variable</div><div id="wwpID0ETHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0ESHA" class="Code"># printenv &lt;environment_variable&gt;</div><div id="wwpID0ERHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> refers to an environment variable in U‑Boot.</div><div id="wwpID0EQHA" class="List_Continue">For example, to print the boot device partition number, execute:</div><div id="wwpID0EPHA" class="Code"># printenv pn</div><div id="wwpID0EOHA" class="List_Continue">Output can be as follows:</div><div id="wwpID0ENHA" class="Code">pn=1</div><div id="wwpID0EMHA" class="Heading_5">To set an environment variable</div><div id="wwpID0ELHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EKHA" class="Code"># setenv &lt;environment_variable&gt; &lt;new_value&gt;</div><div id="wwpID0EJHA" class="List_Continue">Where <span class="Code_Char">&lt;environment_variable&gt;</span> refers to an environment variable in U‑Boot and &lt;new_value&gt; is the new value for that variable. </div><div id="wwpID0EIHA" class="List_Continue">For example, to set the partition number variable, enter the following command:</div><div id="wwpID0EHHA" class="Code"># setenv pn 1</div><div id="wwpID0EGHA" class="Heading_5">To save the modified environment</div><div id="wwpID0EFHA" class="List_Bullet"><span class="WebWorks_Number" style="width: 18pt"><span>•</span></span>Execute the following command:</div><div id="wwpID0EEHA" class="Code"># saveenv</div><div id="wwpID0EDHA" class="List_Continue">The saved modified environment is preserved in case of resets and reboots.</div><div id="wwpID0EBHA" class="List_Continue">&nbsp;</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br><hr color="#DEE4F0"><table width="90%" align="center" summary=""><tr><td class="Footer_Left"><font color="gray"><b><br>
        Copyright © 2011-2015 by NVIDIA Corporation.
          All rights reserved.
        </font></td><td class="Footer_Right"><font color="gray">
           PG_06076-R21<br>
        Revised: 10 Jul 2015
        </font></td></tr></table></footer></body></html>